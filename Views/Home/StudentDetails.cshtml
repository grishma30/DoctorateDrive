@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Student Registration Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/StudentDetails.css" />
</head>
<body>
    <div class="container my-5">
        <div class="card p-4">
            <h2 class="text-center mb-4">Student Details Form</h2>

            @if (!string.IsNullOrEmpty(ViewBag.ErrorMessage))
            {
                <div class="alert alert-danger">@ViewBag.ErrorMessage</div>
            }

            <form id="registrationForm"
                  method="post"
                  enctype="multipart/form-data"
                  asp-action="StudentDetails"
                  asp-controller="Home">

                @Html.AntiForgeryToken()

                <!-- ========================================== -->
                <!-- ACADEMIC LEVEL SECTION -->
                <!-- ========================================== -->
                <fieldset class="mb-4">
                    <legend>Academic Level</legend>

                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label class="form-label" for="cgpaInput">M.Tech CGPA Gained*</label>
                            <input type="number" step="0.01" class="form-control" id="cgpaInput" name="cgpaInput" required />
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label" for="totalCgpa">Total CGPA*</label>
                            <input type="number" step="0.01" class="form-control" id="totalCgpa" name="totalCgpa" value="10" required />
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label" for="equivalentPercentage">Equivalent Percentage* <small class="text-muted"></small></label>
                            <input type="number" step="0.01" class="form-control" id="equivalentPercentage" name="equivalentPercentage"  required />
                        </div>
                        <!-- Equivalent CGPA Certificate Upload -->
                        <div class="row mt-3" id="equivalentCgpaUpload" style="display: none;">
                            <div class="col-12">
                                <label class="form-label">Upload CGPA-to-Percentage Conversion Certificate*</label>
                                <input type="file" class="form-control" id="equivalentCgpaCertificate" name="EquivalentCgpaCertificate" accept=".pdf,.jpg,.jpeg,.png" required />
                                <small class="text-muted">Accepted: PDF, JPG, PNG (Max 5MB)</small>
                            </div>
                        </div>

                        <!-- Message for ineligible students -->
                        <div class="row mt-2" id="eligibilityMessage" style="display: none;">
                            <div class="col-12">
                                <p class="text-danger">You are not eligible to apply. Minimum CGPA required is 6.0.</p>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label class="form-label">Graduate Qualification*</label>
                            <select class="form-select" id="graduateSelect" name="graduateSelect" required>
                                <option value="">Select</option>
                                <option value="B.Tech">B.Tech</option>
                                <option value="BE">B.E.</option>
                                <option value="B.Sc">B.Sc</option>
                                <option value="BCA">BCA</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label">Post Graduate Qualification*</label>
                            <select class="form-select" id="postGraduateSelect" name="postGraduateSelect" required>
                                <option value="">Select</option>
                                <option value="M.Tech">M.Tech</option>
                                <option value="ME">M.E.</option>
                                <option value="M.Sc">M.Sc</option>
                                <option value="MCA">MCA</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label">GATE Qualified?*</label>
                            <select class="form-select" id="gateSelect" name="gateSelect" required>
                                <option value="">Select</option>
                                <option value="Yes">Yes</option>
                                <option value="No">No</option>
                            </select>
                        </div>
                    </div>

                    <!-- Graduate Certificate Upload -->
                    <div class="row mt-3" id="graduateUpload" style="display: none;">
                        <div class="col-12">
                            <label class="form-label">Upload Graduate Certificate/Marksheet*</label>
                            <input type="file" class="form-control" id="graduateCertificate" name="graduateCertificate" accept=".pdf,.jpg,.jpeg,.png" />
                            <small class="text-muted">Accepted: PDF, JPG, PNG (Max 5MB)</small>
                        </div>
                    </div>

                    <!-- Post Graduate Certificate Upload -->
                    <div class="row mt-3" id="postGraduateUpload" style="display: none;">
                        <div class="col-12">
                            <label class="form-label">Upload Post Graduate Certificate/Marksheet*</label>
                            <input type="file" class="form-control" id="postGraduateCertificate" name="postGraduateCertificate" accept=".pdf,.jpg,.jpeg,.png" />
                            <small class="text-muted">Accepted: PDF, JPG, PNG (Max 5MB)</small>
                        </div>
                    </div>

                    <!-- GATE Certificate Upload -->
                    <div class="row mt-3" id="gateUpload" style="display: none;">
                        <div class="col-12">
                            <label class="form-label">Upload GATE Scorecard*</label>
                            <input type="file" class="form-control" id="gateCertificate" name="gateCertificate" accept=".pdf,.jpg,.jpeg,.png" />
                            <small class="text-muted">Accepted: PDF, JPG, PNG (Max 5MB)</small>
                        </div>
                    </div>
                </fieldset>

                <!-- ========================================== -->
                <!-- ACADEMIC PREFERENCE SECTION (NEW) -->
                <!-- ========================================== -->
                <fieldset class="mb-4">
                    <legend>Your Academic Preference</legend>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label" for="preferredInstitute">Institute*</label>
                            <select class="form-select" id="preferredInstitute" name="preferredInstitute" required>
                                <option value="">Choose</option>
                                <option value="CSPIT">CSPIT</option>
                                <option value="IIIM">IIIM</option>
                                <option value="CMPICA">CMPICA</option>
                                <option value="PDPIAS">PDPIAS</option>
                                <option value="BDPIS">BDPIS</option>
                                <option value="ARIP">ARIP</option>
                                <option value="RPCP">RPCP</option>
                                <option value="MTIN">MTIN</option>
                                <option value="DEPSTAR">DEPSTAR</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label" for="preferredSpecialization">Specialization</label>
                            <select class="form-select" id="preferredSpecialization" name="preferredSpecialization">
                                <option value="">Choose Specialization</option>
                            </select>
                        </div>
                    </div>
                </fieldset>

                <!-- ========================================== -->
                <!-- PERSONAL DETAILS SECTION -->
                <!-- ========================================== -->
                <fieldset class="mb-4">
                    <legend>Personal Details</legend>

                    <div class="row mb-3">
                        <div class="col-md-4 mb-2">
                            <label class="form-label" for="firstName">First Name*</label>
                            <input type="text" id="firstName" name="firstName" class="form-control" required />
                        </div>
                        <div class="col-md-4 mb-2">
                            <label class="form-label" for="middleName">Middle Name</label>
                            <input type="text" id="middleName" name="middleName" class="form-control" />
                        </div>
                        <div class="col-md-4 mb-2">
                            <label class="form-label" for="lastName">Last Name*</label>
                            <input type="text" id="lastName" name="lastName" class="form-control" required />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4 mb-2">
                            <label class="form-label" for="email">Email*</label>
                            <input type="email" id="email" name="email" class="form-control" required />
                        </div>
                        <div class="col-md-4 mb-2">
                            <label class="form-label" for="mobileNumber">Mobile Number*</label>
                            <input type="tel" id="mobileNumber" name="mobileNumber" class="form-control" required />
                        </div>
                        <div class="col-md-4 mb-2">
                            <label class="form-label" for="whatsappNumber">WhatsApp Number*</label>
                            <input type="tel" id="whatsappNumber" name="whatsappNumber" class="form-control" required />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4 mb-2">
                            <label class="form-label" for="dob">Date of Birth*</label>
                            <input type="date" id="dob" name="dob" class="form-control" required />
                        </div>
                        <div class="col-md-4 mb-2">
                            <label class="form-label" for="casteCategory">Caste Category*</label>
                            <select class="form-select" id="casteCategory" name="casteCategory" required>
                                <option value="">Select</option>
                                <option>General</option>
                                <option>OBC</option>
                                <option>SC</option>
                                <option>ST</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-2">
                            <label class="form-label" for="nationality">Nationality*</label>
                            <select class="form-select" id="nationality" name="nationality" required>
                                <option value="">Select</option>
                                <option>Indian</option>
                                <option>Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label d-block">Gender*</label>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="male" value="Male" required />
                            <label class="form-check-label" for="male">Male</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="female" value="Female" />
                            <label class="form-check-label" for="female">Female</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="gender" id="transgender" value="Transgender" />
                            <label class="form-check-label" for="transgender">Transgender</label>
                        </div>
                    </div>
                </fieldset>

                <!-- ========================================== -->
                <!-- GUARDIAN DETAILS SECTION -->
                <!-- ========================================== -->
                <fieldset class="mb-4">
                    <legend>Guardian Details</legend>

                    <div class="row mb-3">
                        <div class="col-md-6 mb-2">
                            <label class="form-label" for="guardianName">Guardian Name*</label>
                            <input type="text" id="guardianName" name="guardianName" class="form-control" required />
                        </div>
                        <div class="col-md-6 mb-2">
                            <label class="form-label" for="relationWithApplicant">Relation*</label>
                            <select class="form-select" id="relationWithApplicant" name="relationWithApplicant" required>
                                <option value="">Select</option>
                                <option>Father</option>
                                <option>Mother</option>
                                <option>Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6 mb-2">
                            <label class="form-label" for="guardianEmail">Guardian Email</label>
                            <input type="email" id="guardianEmail" name="guardianEmail" class="form-control" />
                        </div>
                        <div class="col-md-6 mb-2">
                            <label class="form-label" for="guardianMobile">Guardian Mobile</label>
                            <input type="tel" id="guardianMobile" name="guardianMobile" class="form-control" />
                        </div>
                    </div>
                </fieldset>

                <!-- ========================================== -->
                <!-- ADDRESS DETAILS SECTION -->
                <!-- ========================================== -->
                <fieldset class="mb-4">
                    <legend>Address Details</legend>

                    <div class="row mb-3">
                        <div class="col-md-3 mb-2">
                            <label class="form-label" for="country">Country*</label>
                            <select class="form-select" id="country" name="country" required>
                                <option value="">Select</option>
                                <option>India</option>
                                <option>Other</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="form-label" for="state">State*</label>
                            <input type="text" id="state" name="state" class="form-control" required />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="form-label" for="district">District*</label>
                            <input type="text" id="district" name="district" class="form-control" required />
                        </div>
                        <div class="col-md-3 mb-2">
                            <label class="form-label" for="city">City*</label>
                            <input type="text" id="city" name="city" class="form-control" required />
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6 mb-2">
                            <label class="form-label" for="pin">PIN Code*</label>
                            <input type="text" id="pin" name="pin" class="form-control" pattern="[0-9]{6}" maxlength="6" required />
                        </div>
                    </div>
                </fieldset>

                <div class="text-center">
                    <button type="submit" class="btn btn-primary btn-lg px-5">Submit</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    @* <script>
        document.addEventListener("DOMContentLoaded", function () {

        // ===== Auto-calculate CGPA percentage =====
        // function calculatePercentage() {
        //     const cgpa = parseFloat(document.getElementById('cgpaInput').value) || 0;
        //     const total = parseFloat(document.getElementById('totalCgpa').value) || 10;
        //     if (cgpa && total) {
        //         const percent = ((cgpa / total) * 100).toFixed(2);
        //         document.getElementById('equivalentPercentage').value = percent;
        //         if (percent < 60) {
        //             alert("⚠️ Your percentage is below 60%. You may not be eligible.");
        //         }
        //     }
        // }

        document.getElementById('cgpaInput').addEventListener('input', calculatePercentage);
        document.getElementById('totalCgpa').addEventListener('input', calculatePercentage);
                const percentageInput = document.getElementById('equivalentPercentage');
        const equivalentUpload = document.getElementById('equivalentCgpaUpload');
        const equivalentFile = document.getElementById('equivalentCgpaCertificate');
        const eligibilityMessage = document.getElementById('eligibilityMessage');
        const form = document.querySelector('form');

                // Block submission if percentage < 60
        form.addEventListener('submit', function (e) {
            const perc = parseFloat(percentageInput.value);
            if (isNaN(perc) || perc < 60) {
                e.preventDefault();
                alert("⚠️ You cannot submit the form as your equivalent percentage is below 60%.");
            }
        });

        percentageInput.addEventListener('input', function () {
            const perc = parseFloat(this.value);
            if (!isNaN(perc) && perc >= 60) {
                equivalentUpload.style.display = 'block';
                equivalentFile.required = true;
                eligibilityMessage.style.display = 'none';
            } else if (!isNaN(perc)) {
                equivalentUpload.style.display = 'none';
                equivalentFile.required = false;
                eligibilityMessage.style.display = 'block';
            } else {
                equivalentUpload.style.display = 'none';
                equivalentFile.required = false;
                eligibilityMessage.style.display = 'none';
            }
        });


        // ===== Show/hide certificate uploads =====
        document.getElementById('graduateSelect').addEventListener('change', function () {
            const upload = document.getElementById('graduateUpload');
            const input = document.getElementById('graduateCertificate');
            if (this.value) {
                upload.style.display = 'block';
                input.required = true;
            } else {
                upload.style.display = 'none';
                input.required = false;
            }
        });

        document.getElementById('postGraduateSelect').addEventListener('change', function () {
            const upload = document.getElementById('postGraduateUpload');
            const input = document.getElementById('postGraduateCertificate');
            if (this.value) {
                upload.style.display = 'block';
                input.required = true;
            } else {
                upload.style.display = 'none';
                input.required = false;
            }
        });

        document.getElementById('gateSelect').addEventListener('change', function () {
            const upload = document.getElementById('gateUpload');
            const input = document.getElementById('gateCertificate');
            if (this.value === 'Yes') {
                upload.style.display = 'block';
                input.required = true;
            } else {
                upload.style.display = 'none';
                input.required = false;
            }
        });

        // ===== Academic Preference: Dynamic Specialization Dropdown =====
        const specializationData = {
            "CSPIT": [
                "Civil Engineering",
                "Computer Engineering",
                "Electrical Engineering"
            ],
            "IIIM": [
                "Marketing and General Management",
                "Finance Management",
                "Operations Management",
                "Banking and Accounting",
                "Business Analytics"
            ],
            "CMPICA": [],
            "PDPIAS": [
                "Physics",
                "Chemical Sciences",
                "Biological Sciences",
                "Mathematical Sciences"
            ],
            "BDPIS": [
                "Medical Imaging Technology (e.g., CT, MRI)",
                "Optometry",
                "Operation Theatre & Anesthesia Technology",
                "Cancer Biology",
                "Drug Discovery"
            ],
            "ARIP": [
                "Physiotherapy"
            ],
            "RPCP": [
                "Pharmaceutical Analysis",
                "Pharmaceutical Chemistry",
                "Pharmaceutics",
                "Pharmacology",
                "Clinical Pharmacy & Pharmacognosy",
                "Pharmacognosy"
            ],
            "MTIN": [
                "Nursing"
            ],
            "DEPSTAR": []
        };

        document.getElementById('preferredInstitute').addEventListener('change', function () {
            const inst = this.value;
            const specializationSelect = document.getElementById('preferredSpecialization');
            specializationSelect.innerHTML = '<option value="">Choose Specialization</option>';

            if (specializationData[inst] && specializationData[inst].length > 0) {
                specializationData[inst].forEach(function (spec) {
                    const opt = document.createElement('option');
                    opt.value = spec;
                    opt.textContent = spec;
                    specializationSelect.appendChild(opt);
                });
                specializationSelect.required = true;
                specializationSelect.disabled = false;
            } else {
                specializationSelect.required = false;
                specializationSelect.disabled = true;
            }
        });
        });
    </script> *@

    <script>
        document.addEventListener("DOMContentLoaded", function () {

            const percentageInput = document.getElementById('equivalentPercentage');
            const equivalentUpload = document.getElementById('equivalentCgpaUpload');
            const equivalentFile = document.getElementById('equivalentCgpaCertificate');
            const eligibilityMessage = document.getElementById('eligibilityMessage');
            const form = document.querySelector('form');

            // Block submission if percentage < 60
            form.addEventListener('submit', function (e) {
                const perc = parseFloat(percentageInput.value);
                if (isNaN(perc) || perc < 60) {
                    e.preventDefault();
                    alert("⚠️ You cannot submit the form as your equivalent percentage is below 60%.");
                }
            });

            // Show / Hide Equivalent CGPA Certificate Upload
            percentageInput.addEventListener('input', function () {
                const perc = parseFloat(this.value);

                if (!isNaN(perc) && perc >= 60) {
                    equivalentUpload.style.display = 'block';
                    equivalentFile.required = true;
                    eligibilityMessage.style.display = 'none';
                } else if (!isNaN(perc)) {
                    equivalentUpload.style.display = 'none';
                    equivalentFile.required = false;
                    eligibilityMessage.style.display = 'block';
                } else {
                    equivalentUpload.style.display = 'none';
                    equivalentFile.required = false;
                    eligibilityMessage.style.display = 'none';
                }
            });

            // Show/hide Graduate Upload
            document.getElementById('graduateSelect').addEventListener('change', function () {
                const upload = document.getElementById('graduateUpload');
                const input = document.getElementById('graduateCertificate');

                if (this.value) {
                    upload.style.display = 'block';
                    input.required = true;
                } else {
                    upload.style.display = 'none';
                    input.required = false;
                }
            });

            // Show/hide Post Graduate Upload
            document.getElementById('postGraduateSelect').addEventListener('change', function () {
                const upload = document.getElementById('postGraduateUpload');
                const input = document.getElementById('postGraduateCertificate');

                if (this.value) {
                    upload.style.display = 'block';
                    input.required = true;
                } else {
                    upload.style.display = 'none';
                    input.required = false;
                }
            });

            // Show/hide GATE Upload
            document.getElementById('gateSelect').addEventListener('change', function () {
                const upload = document.getElementById('gateUpload');
                const input = document.getElementById('gateCertificate');

                if (this.value === 'Yes') {
                    upload.style.display = 'block';
                    input.required = true;
                } else {
                    upload.style.display = 'none';
                    input.required = false;
                }
            });
            // ===== Academic Preference: Dynamic Specialization Dropdown =====
        const specializationData = {
            "CSPIT": [
                "Civil Engineering",
                "Computer Engineering",
                "Electrical Engineering"
            ],
            "IIIM": [
                "Marketing and General Management",
                "Finance Management",
                "Operations Management",
                "Banking and Accounting",
                "Business Analytics"
            ],
            "CMPICA": [],
            "PDPIAS": [
                "Physics",
                "Chemical Sciences",
                "Biological Sciences",
                "Mathematical Sciences"
            ],
            "BDPIS": [
                "Medical Imaging Technology (e.g., CT, MRI)",
                "Optometry",
                "Operation Theatre & Anesthesia Technology",
                "Cancer Biology",
                "Drug Discovery"
            ],
            "ARIP": [
                "Physiotherapy"
            ],
            "RPCP": [
                "Pharmaceutical Analysis",
                "Pharmaceutical Chemistry",
                "Pharmaceutics",
                "Pharmacology",
                "Clinical Pharmacy & Pharmacognosy",
                "Pharmacognosy"
            ],
            "MTIN": [
                "Nursing"
            ],
            "DEPSTAR": []
        };

        document.getElementById('preferredInstitute').addEventListener('change', function () {
            const inst = this.value;
            const specializationSelect = document.getElementById('preferredSpecialization');
            specializationSelect.innerHTML = '<option value="">Choose Specialization</option>';

            if (specializationData[inst] && specializationData[inst].length > 0) {
                specializationData[inst].forEach(function (spec) {
                    const opt = document.createElement('option');
                    opt.value = spec;
                    opt.textContent = spec;
                    specializationSelect.appendChild(opt);
                });
                specializationSelect.required = true;
                specializationSelect.disabled = false;
            } else {
                specializationSelect.required = false;
                specializationSelect.disabled = true;
            }
        });

        });
    </script>

</body>
</html>
